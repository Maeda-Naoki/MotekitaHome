---
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const githubRepo = 'https://github.com/luckyretriever/motekita';
const releases = `${githubRepo}/releases/latest`;
---

<section id="download" class="py-20 sm:py-32">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl font-bold">{t('download.title')}</h2>
      <p class="mt-4 text-lg text-muted-foreground">{t('download.subtitle')}</p>
    </div>

    <div class="grid sm:grid-cols-3 gap-6 max-w-3xl mx-auto">
      <!-- Windows -->
      <a
        href={releases}
        target="_blank"
        rel="noopener noreferrer"
        class="group flex flex-col items-center p-8 bg-background rounded-lg border hover:border-primary hover:shadow-lg transition-all"
      >
        <div class="w-16 h-16 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
          <svg class="w-8 h-8 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801"/>
          </svg>
        </div>
        <span class="text-lg font-semibold">{t('download.windows')}</span>
        <span class="text-sm text-muted-foreground mt-1">.msi / .exe</span>
      </a>

      <!-- macOS -->
      <a
        href={releases}
        target="_blank"
        rel="noopener noreferrer"
        class="group flex flex-col items-center p-8 bg-background rounded-lg border hover:border-primary hover:shadow-lg transition-all"
      >
        <div class="w-16 h-16 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
          <svg class="w-8 h-8 text-gray-700 dark:text-gray-300" fill="currentColor" viewBox="0 0 24 24">
            <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
          </svg>
        </div>
        <span class="text-lg font-semibold">{t('download.macos')}</span>
        <span class="text-sm text-muted-foreground mt-1">.dmg</span>
      </a>

      <!-- Linux -->
      <a
        href={releases}
        target="_blank"
        rel="noopener noreferrer"
        class="group flex flex-col items-center p-8 bg-background rounded-lg border hover:border-primary hover:shadow-lg transition-all"
      >
        <div class="w-16 h-16 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
          <svg class="w-8 h-8 text-orange-600 dark:text-orange-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12.504 0c-.155 0-.311.001-.465.003-.653.014-1.302.074-1.944.18-1.288.212-2.522.638-3.655 1.262-.11.06-.22.122-.328.187-.11.065-.218.133-.325.202-.213.14-.423.286-.628.441-.205.155-.406.316-.602.484-.196.168-.388.343-.574.524-.186.181-.367.369-.542.562-.176.193-.346.392-.509.597-.164.205-.321.416-.471.632-.15.216-.293.438-.429.664-.136.226-.264.457-.385.693-.121.235-.234.476-.339.72-.105.245-.202.494-.291.747-.089.253-.17.51-.243.77-.073.26-.138.524-.194.79-.056.267-.104.538-.143.811-.039.273-.069.549-.091.828-.022.278-.035.56-.039.842-.004.283.001.567.014.852.013.285.035.57.065.855.03.285.068.57.115.854.047.284.102.567.165.849.063.282.134.563.212.842.079.279.165.556.259.832.094.275.195.548.304.818.109.27.225.537.348.801.123.264.253.525.39.782.137.257.281.51.432.758.151.249.309.493.473.732.164.24.335.474.512.703.177.229.36.452.549.67.189.217.384.429.585.634.201.205.407.404.619.596.212.192.429.378.651.556.222.178.449.35.68.514.231.164.467.321.707.47.24.15.484.291.732.425.248.134.5.26.755.377.256.118.515.227.778.328.263.1.529.193.798.276.269.084.541.159.815.225.275.066.553.123.832.171.28.048.562.087.846.117.284.03.57.05.857.062.287.012.575.014.863.008.288-.006.577-.022.865-.047.288-.025.576-.059.862-.102.287-.043.572-.095.856-.155.284-.061.566-.13.845-.208.28-.078.557-.165.831-.259.274-.095.546-.197.814-.307.268-.11.533-.229.794-.354.261-.125.519-.258.772-.398.253-.14.503-.288.748-.442.245-.154.486-.316.722-.484.236-.168.468-.343.694-.524.226-.18.448-.368.664-.561.216-.193.427-.393.632-.598.205-.206.404-.417.598-.634.194-.217.382-.44.563-.668.182-.228.357-.461.526-.699.169-.238.331-.482.486-.73.155-.248.303-.501.444-.759.14-.257.274-.519.399-.785.126-.266.244-.536.354-.81.111-.274.213-.552.308-.833.095-.281.181-.566.26-.854.078-.288.148-.579.21-.872.062-.293.115-.59.161-.888.045-.299.082-.6.11-.902.029-.303.049-.608.06-.914.012-.306.015-.614.01-.922-.006-.308-.021-.618-.044-.927-.024-.31-.056-.62-.097-.929-.041-.309-.09-.617-.147-.924-.057-.307-.122-.613-.195-.917-.073-.304-.153-.607-.241-.907-.088-.3-.184-.598-.287-.893-.103-.295-.214-.588-.332-.877-.118-.289-.244-.575-.377-.857-.133-.282-.273-.561-.42-.835-.148-.274-.302-.544-.464-.809-.162-.265-.331-.525-.506-.781-.175-.255-.357-.506-.545-.751-.188-.245-.383-.485-.584-.72-.201-.234-.408-.463-.621-.686-.213-.223-.432-.44-.657-.651-.224-.211-.454-.416-.69-.615-.235-.198-.476-.39-.722-.575-.246-.185-.497-.363-.754-.535-.256-.172-.517-.337-.783-.494-.266-.157-.536-.307-.811-.449-.275-.142-.555-.277-.838-.403-.284-.126-.571-.244-.862-.355-.291-.11-.586-.213-.883-.307-.297-.094-.598-.181-.901-.259-.303-.078-.609-.149-.917-.211-.308-.062-.619-.116-.931-.161-.312-.045-.626-.082-.941-.11-.316-.028-.633-.048-.951-.059-.318-.011-.637-.013-.956-.007z"/>
          </svg>
        </div>
        <span class="text-lg font-semibold">{t('download.linux')}</span>
        <span class="text-sm text-muted-foreground mt-1">.AppImage / .deb</span>
      </a>
    </div>

    <div class="text-center mt-12">
      <a
        href={githubRepo}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        {t('download.github')}
      </a>
    </div>
  </div>
</section>
