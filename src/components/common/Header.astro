---
import {
  getLangFromUrl,
  getLocalizedPath,
  useTranslations,
} from '@/i18n/utils';
import LanguageSwitcher from './LanguageSwitcher.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const navItems = [
  { href: getLocalizedPath('/', lang) + '#features', label: t('nav.features') },
  { href: getLocalizedPath('/', lang) + '#pricing', label: t('nav.pricing') },
  { href: getLocalizedPath('/', lang) + '#download', label: t('nav.download') },
  { href: getLocalizedPath('/faq', lang), label: t('nav.faq') },
];
---

<header class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="container mx-auto flex h-16 items-center justify-between px-4">
    <a href={getLocalizedPath('/', lang)} class="flex items-center gap-2">
      <img src="/favicon.png" alt="" class="w-8 h-8" />
      <span class="text-xl font-bold">Motekita</span>
    </a>

    <nav class="hidden md:flex items-center gap-6" aria-label={lang === 'ja' ? 'メインナビゲーション' : 'Main navigation'}>
      {navItems.map((item) => (
        <a
          href={item.href}
          class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
        >
          {item.label}
        </a>
      ))}
    </nav>

    <div class="flex items-center gap-4">
      <LanguageSwitcher />
      <a
        href={getLocalizedPath('/', lang) + '#download'}
        class="hidden sm:inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 transition-colors"
      >
        {t('nav.download')}
      </a>
    </div>
  </div>
</header>
