---
import { getLangFromUrl, getAlternateLang, getLanguageName } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const alternateLang = getAlternateLang(lang);

const currentPath = Astro.url.pathname.replace(/^\/(ja|en)/, '');
const alternatePath = `/${alternateLang}${currentPath || '/'}`;
---

<a
  href={alternatePath}
  class="inline-flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
  aria-label={`Switch to ${getLanguageName(alternateLang)}`}
>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0">
    <circle cx="12" cy="12" r="10"></circle>
    <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
    <path d="M2 12h20"></path>
  </svg>
  <span>{getLanguageName(alternateLang)}</span>
</a>
